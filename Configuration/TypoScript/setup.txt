plugin.tx_formrelay_salesforce {

	enabled = {$plugin.tx_formrelay_salesforce.enabled}

	salesForceUrl = {$plugin.tx_formrelay_salesforce.salesForceUrl}

	fields {
		removeFieldNameParts =

		validation {
			required = email

			validWithNoFilters = 1
			# filters {
			# 	1 {
			# 		whitelist {
			# 			country = us,ca
			# 			inquiry_type = quote_request,product_information
			# 		}
			# 	}
			# }
		}

		defaults {
			oid = {$plugin.tx_formrelay_salesforce.fields.defaults.oid}
			submit = {$plugin.tx_formrelay_salesforce.fields.defaults.submit}
			retURL = {$plugin.tx_formrelay_salesforce.fields.defaults.retURL}
			lead_source = {$plugin.tx_formrelay_salesforce.fields.defaults.lead_source}
		}

		mapping {
			# form-field  -> sdfc-field
			first_name = split:first_name,last_name
			last_name = last_name
			company = company
			department = department
			email = email
			phone = phone
			zip = zip
			country = country_code
			city = city
			street_address1 = append:street
			street_address2 = append:street
			street = street
			fax = fax
			language = language
			lead_source = lead_source
	 	}
		mappingOther = concat:description
		specialMapping {
			last_name {
				valuesNot =
				mapping {
					first_name = first_name
				}
			}
		}

		ignore.value = html_enabled,subject,recipient,recipient_copy,submit,password,password_again,randomID

		values {
			ignoreIfEmpty = 1
			mapping {
				inquiry_type {
					quote_request = Request a Quote
					product_information = Request Product Information
				}
				contact_preference {
					email = Email
					phone = Phone
				}
			}
		}
	}

	configurationOverwrite {
	}
}

[globalVar = LIT:1 = {$plugin.tx_formrelay_salesforce.enableCampaignNumber}]
page {
	# PAGE campaign number
	footerData.1530544082 = TEXT
	footerData.1530544082 {
		value.field = tx_formrelaysalesforce_campaignnumber
		insertData = 1
		wrap (
			<script type="text/javascript">/*<![CDATA[*/
			// via formrelay_salesforce
			window.formrelay_salesforce_campaign_number = "|";
			/*]]>*/</script>
		)
		required = 1
	}
	includeJSFooter {
		campaignNumberCookieScript = {$plugin.tx_formrelay_salesforce.javascript.campaignNumberCookieScript}
	}
	# NEWS campaign number
	footerData.1536314635 = TEXT
	footerData.1536314635 {
		data = GP:tx_news_pi1|news
        insertData = 1
		wrap (
			<script type="text/javascript">/*<![CDATA[*/
			// via news ...
			var formrelay_salesforce_campaign_number = "{DB:tx_news_domain_model_news:|:tx_formrelaysalesforce_campaignnumber}";
			/*]]>*/</script>
		)
		required = 1
	}
}
[global]
